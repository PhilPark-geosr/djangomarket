{% load bootstrap4 %} 
{% comment %} UI관련 라이브러리 임포트 {% endcomment %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0"> -->
    <title>Document</title>
    <!-- css, js import -->
    
    <!-- 다양한 테마 가능 -->
    <!-- 주소 : https://www.bootstrapcdn.com/bootswatch/ -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootswatch@4.5.2/dist/darkly/bootstrap.min.css" integrity="sha384-nNK9n28pDUDDgIiIqZ/MiyO3F4/9vsMtReZK39klb/MtkZI3/LtjSjlmyVPS3KdN" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous"> -->
    <!-- Note : bootstrap4는 내부적으로 jquery를 이용하므로, 받아놔야 한다 -->
    <script src="https://code.jquery.com/jquery-2.2.4.js" integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.min.js" integrity="sha384-+sLIOodYLS7CIrQpBjl+C7nPvqq+FbNUBDunl/OZv93DB7Ln/533i8e/mZXLi/P+" crossorigin="anonymous"></script>
    <style>
        /* 반응형 --> 600px 아래로 가면 바디태그 background color green으로 변경 */
        @media (max-width: 600px) {
            body {
                background-color: green;
            } 
        }
    </style>
</head>
<body>

    <form action = "" method = "get">
        <input type = "text" name = "q" , value = "{{q}}"/>
        <input type = "submit" value = "검색" />
    </form>
    <a href = "./new/" class = 'btn btn-primary'>새 포스팅</a>
    <table class = "table table-bordered table-hover">
        <tbody>
            <tr>
                <td>
                    pk
                </td>
                <td>
                    user
                </td>
                <td>
                    photo
                </td>
                <td>
                    message
                </td>
                <td>
                    created_at
                </td>
                <td>
                    tag
                </td>
            </tr>
        {% for post in post_list %}
            
            <tr>
                <td>
                    {{post.pk}}
                </td>
                <td>
                    {{post.author.username}}
                </td>
                <td>
                    {% if post.photo %}
                        <img src = {{post.photo.url}} style = "width:70px"/>
                    {% else %}
                        No photo
                    {% endif %}
                </td>
                <td>
                    {% comment %} url reverse 동작하도록 .. {% endcomment %}
                    {% comment %} <a href="{% url "instagram:post_detail" post.pk %}"> {% endcomment %}
                    <a href="{{post.get_absolute_url}}">
                        {{post.message}}
                    </a>
                
                </td>
                <td>
                {{post.created_at}}
                </td>
                <td>
                    {% comment %} represent many to many field {% endcomment %}
                    {% for tag in post.tag_set.all%}
                        {{tag}}
                    {% endfor %}
                </td>
                
            </tr>
        {% endfor %}
        </tbody>
        </table>

        <!-- 페이징 처리 -->
        {% comment %} {{is_paginated}}
        {{page_obj}} {% endcomment %}
        
        {% comment %} 페이징 처리 : bootstrap4 라이브러리 활용 
        띄어쓰기 민감하므로 없이 처리!!
        {% endcomment %}
        {% if is_paginated %}
            {% bootstrap_pagination page_obj size="small" justify_content="center"%}
        {% endif %}
        
</body>

</html>





